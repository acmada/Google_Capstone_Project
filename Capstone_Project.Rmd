---
title: "Capstone Project"
author: "Barbara Milewski"
date: "2022-05-25"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

## Install Packages

These are the packages installed and loaded to analyze the data.

```{r package installation}
install.packages("broom", type="binary")
install.packages("ggplot2", type="binary")
install.packages("tidyverse")
install.packages("lubridate")
install.packages("janitor")
install.packages("here")
```

```{r package loading}
library("tidyverse")
library("lubridate")
library("janitor")
library("here")
library("dplyr")
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

## Import Data

Exploratory analysis revealed that dailyActivity_merged.csv contained all the data that the other daily datasets contained, so only it will be imported. The sleep, hourly steps, and hourly intensities datasets will also be imported, as they will give insight into the health needs of the target consumers.

```{r data importing}
activity = read_csv('Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv')
sleep = read_csv('Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv')
steps = read_csv('Fitabase Data 4.12.16-5.12.16/hourlySteps_merged.csv')
intensities = read_csv('Fitabase Data 4.12.16-5.12.16/hourlyIntensities_merged.csv')
```

## Process Data

Now that the desired datasets are imported and converted to dataframes, let's start processing them. The first task is to determine the number of unique IDs/participants in each dataset.

```{r data processing}
n_distinct(activity$Id)
n_distinct(sleep$Id)
n_distinct(steps$Id)
n_distinct(intensities$Id)
```

It can be seen that there are 33 unique participants in the activity, steps, and intensities datasets, but only 24 in the sleep dataset. However, that is still acceptable.

The next task is to correct the datetime formats.

```{r datetime formatting}
activity = activity %>% mutate(ActivityDate = as_POSIXct(date_time, format = "%m/%d/%Y"))

sleep = sleep %>% mutate(SleepDay = as_POSIXct(date_time, format = "%m/%d/%Y"))

steps = steps %>% mutate(ActivityHour = as_POSIXct(date_time, format = "%m/%d/%Y %I:%M:%S %p", tz = Sys.timezone()))

intensities = intensities %>% mutate(ActivityHour = as_POSIXct(date_time, format = "%m/%d/%Y %I:%M:%S %p", tz = Sys.timezone()))

# Check that the date and time formats converted correctly

head(activity)
head(sleep)
tail(steps)
tail(intensities)
```
